# General simulation settings
[General]
warmup-period = ${warmupPeriod=15}s
sim-time-limit = 10min #${simTimeLimit=1}h
repeat = 1
debug-on-errors = true
# Use express mode to suppress unnecessary GUI output when run from the
# command line.  Set to false to enable full debugging information.
cmdenv-express-mode = true
cmdenv-autoflush = true
cmdenv-status-frequency = 1s

# Load our new network
network = SatelliteHelloScenario
*.playgroundSizeX = 1000m
*.playgroundSizeY = 1000m
*.playgroundSizeZ = 1000km

# Gloal IPV4 for the netwrok  edited 
*.configurator.typename = "Ipv4NetworkConfigurator"
*.configurator.assignDisjunctSubnetAddresses = true
*.configurator.addStaticRoutes = true

# TraCI/Veins settings
*.manager.autoShutdown = true
*.manager.updateInterval = 0.1s
*.manager.moduleType = "space_veins.nodes.SatCar"
*.manager.host = "localhost"
*.manager.port = 9999
# Use a small SUMO scenario to spawn vehicles.  You can replace the
# launch configuration and SUMO network files with your own.  The
# example uses the Nullâ€‘Island grid distributed with space_veins.
*.manager.launchConfig = xmldoc("Null-Island-3by3-grid.launchd.xml")

# Vehicle insertion
*.vehicleInserter.numVehicles = ${numVehicles=3}

# Physical environment
*.physicalEnvironment.ground.typename = "FlatGround"

# Visualization settings
*.useOsg = false
*.visualizer.osgVisualizer.typename = ""
*.visualizer.*.radioVisualizer[0].displayRadios = true
*.visualizer.*.radioVisualizer[0].displayAntennaLobes = true
*.visualizer.*.radioVisualizer[0].radioFilter = "*.node[*].satNic[0].radio"
*.visualizer.*.dataLinkVisualizer[0].displayLinks = true

# Mobility visualizers for vehicles and satellite antennas
*.visualizer.*.numMobilityVisualizers = 3
*.visualizer.*.mobilityVisualizer[*].displayMobility = true
*.visualizer.*.mobilityVisualizer[*].displayPositions = true
*.visualizer.*.mobilityVisualizer[*].displayOrientations = true
*.visualizer.*.mobilityVisualizer[*].displayVelocities = true
*.visualizer.*.mobilityVisualizer[*].displayMovementTrails = true
*.visualizer.*.mobilityVisualizer[0].moduleFilter = "*.node[*].mobility *.leo*[*].mobility"
*.visualizer.*.mobilityVisualizer[1].moduleFilter = "*.node[*].satNic[*].radio.antenna.mobility"
*.visualizer.*.mobilityVisualizer[1].positionCircleRadius = 20
*.visualizer.*.mobilityVisualizer[1].positionCircleFillColor = "yellow"
*.visualizer.*.mobilityVisualizer[1].orientationFillColor = "yellow"
*.visualizer.*.mobilityVisualizer[2].moduleFilter = "**.wlan[*].radio.antenna.mobility"
*.visualizer.*.mobilityVisualizer[2].orientationFillColor = "red"

# Satellite observation point parameters
*.sop.sumoNetXmlFile = xmldoc("Null-Island-3by3-grid.net.xml")
*.sop.mobility.updateFromDisplayString = false
*.sop.mobility.initFromDisplayString = false
*.sop.mobility.initialX = 400m
*.sop.mobility.initialY = 397.49m
*.sop.mobility.initialZ = 0m

# Result recording (disable by default; enable as needed)
**.scalar-recording = true
**.vector-recording = true

# Satellite inserter settings
*.satelliteInserter.ignoreUnknownSatellites = false
*.satelliteInserter.wall_clock_sim_start_time_utc = "2024-12-13-10-00-00"

# Satellite mobility and applications
*.leo*[*].mobility.typename = "SGP4Mobility"
*.leo*[*].mobility.updateInterval = 1s
*.leo*[*].mobility.enableCache = true
*.leo*[*].mobility.precalculationIntervalInMinutes = 16
*.leo*[*].numApps = 1
*.leo*[*].app[0].typename = "inet.applications.udpapp.UdpSink"
*.leo*[*].app[0].interface = "satNic0"
*.leo*[*].app[0].localPort = 5000
*.leo*[*].app[0].receiveBroadcast = true
*.leo*[*].app[0].joinLocalMulticastGroups = true
#*.leo*[*].ipv4.arp.typename = "GlobalArp"
#*.leo*[*].ipv4.configurator.typename = "HostAutoConfigurator"
#*.leo*[*].ipv4.configurator.interfaces = "satNic0"
#*.leo*[*].ipv4.configurator.mcastGroups = "224.0.0.1"
*.leo*[*].numLoInterfaces = 0
*.leo*[*].numSatelliteNics = 1

# Vehicle (SatCar) mobility and applications
*.node[*].mobility.typename = "VeinsInetMobility"
*.node[*].numApps = 1
*.node[*].app[0].typename = "inet.applications.udpapp.UdpBasicApp"
*.node[*].app[0].destAddresses = "224.0.0.1"
*.node[*].app[0].startTime = uniform(5.0s, 5.1s)
*.node[*].app[0].packetName = "Hello"
*.node[*].app[0].destPort = 5000
*.node[*].app[0].localPort = 5000
*.node[*].app[0].messageLength = 5B
*.node[*].app[0].sendInterval = 1s
*.node[*].app[0].receiveBroadcast = true
*.node[*].app[0].joinLocalMulticastGroups = true

*.leo*[*].hasIpv4 = true
#*.node[*].ipv4.arp.typename = "GlobalArp"
#*.node[*].ipv4.configurator.typename = "HostAutoConfigurator"
#*.node[*].ipv4.configurator.interfaces = "satNic0"
#*.node[*].ipv4.configurator.mcastGroups = "224.0.0.1"
*.node[*].numLoInterfaces = 0
*.node[*].useSamac = false
*.node[*].numSatelliteNics = 1

# Satellite NIC (common for satellites and vehicles).  We keep similar
# settings to the original example, adjusting only the communication
# ranges and bitrates as needed.
*.satelliteRadioMedium.typename = "UnitDiskRadioMedium"
*.satelliteRadioMedium.mediumLimitCache.minElevationAngleV2S = 25deg
*.satelliteRadioMedium.mediumLimitCache.disableS2SCommunication = true
*.**.satNic[0].typename = "SatelliteInterface"
*.**.satNic[0].mac.typename = "AckingMac"
*.leo*[*].satNic[0].mac.bitrate = 100Mbps        # downlink
*.node[*].satNic[0].mac.bitrate = 10Mbps         # uplink
*.**.satNic[0].mac.headerLength = 32B
*.**.satNic[0].mac.fullDuplex = true
*.**.satNic[0].mac.useAck = false
*.**.satNic[0].radio.typename = "UnitDiskRadio"
*.**.satNic[0].radio.radioMediumModule = "satelliteRadioMedium"
*.**.satNic[0].radio.antenna.mobilityModule = "^.^.^.mobility"
*.**.satNic[0].radio.transmitter.communicationRange = 9999999km
*.leo*[*].satNic[0].radio.transmitter.bitrate = 100Mbps
*.node[*].satNic[0].radio.transmitter.bitrate = 10Mbps
*.**.satNic[0].radio.transmitter.headerLength = 8bit
*.**.satNic[0].radio.transmitter.preambleDuration = 0s
*.leo*[*].satNic[0].radio.receiver.ignoreInterference = false
*.node[*].satNic[0].radio.receiver.ignoreInterference = true

# WLAN NIC settings (if you also want to use WLAN).  These can be
# disabled by setting the number of WLAN interfaces to zero.  Here
# we leave them enabled but do not generate any traffic.
*.wlanRadioMedium.typename = "Ieee80211DimensionalRadioMedium"
*.**.wlan[*].opMode = "p"
*.**.wlan[*].mgmt.typename = "Ieee80211MgmtAdhoc"
*.**.wlan[*].agent.typename = ""
*.**.wlan[*].radio.typename = "Ieee80211DimensionalRadio"
*.**.wlan[*].radio.radioMediumModule = "wlanRadioMedium"
*.**.wlan[*].radio.bandName = "5.9 GHz"
*.**.wlan[*].radio.channelNumber = 3
*.**.wlan[*].radio.transmitter.power = 100mW
*.**.wlan[*].radio.bandwidth = 10MHz
*.**.wlan[*].radio.centerFrequency = 5.89GHz
*.**.wlan[*].radio.receiver.snirThreshold = 0dB
*.**.wlan[*].radio.receiver.energyDetection = -65dBm
*.**.wlan[*].radio.receiver.sensitivity = -98dBm
*.**.wlan[*].radio.**.modulation = "QAM-16"
*.**.wlan[*].radio.antenna.mobility.typename = "AttachedMobility"
*.**.wlan[*].radio.antenna.mobility.mobilityModule = "^.^.^.^.mobility"
*.**.wlan[*].radio.antenna.mobility.offsetX = -2.5m
*.**.wlan[*].radio.antenna.mobility.offsetZ = 1.5m
*.**.wlan[*].radio.antenna.mobility.constraintAreaMinX = 0m
*.**.wlan[*].radio.antenna.mobility.constraintAreaMaxX = 0m
*.**.wlan[*].radio.antenna.mobility.constraintAreaMinY = 0m
*.**.wlan[*].radio.antenna.mobility.constraintAreaMaxY = 0m
*.**.wlan[*].radio.antenna.mobility.constraintAreaMinZ = 0m
*.**.wlan[*].radio.antenna.mobility.constraintAreaMaxZ = 0m

# Example runtime configuration used to iterate over multiple runs with
# different numbers of satellites.  You can copy this section and
# adjust the TLE files or cache usage as needed.  Commented out by
# default.
#[Config Hello-Default]
*.satelliteInserter.pathToTleFile = "starlink_100_tle_run1.txt"
